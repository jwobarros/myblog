{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load blog_filters %}

{% block categories %}

  <div class="col-lg-6">
    <ul class="list-unstyled mb-0">
      {% for tag in tags %}
  
        {% if forloop.counter|even %}
          <li>
            <a href="{% url 'home' %}?tag={{ tag }}">{{ tag }}</a>
          </li>
        {% endif %} 

      {% endfor %}

    </ul>
  </div>

  <div class="col-lg-6">
    <ul class="list-unstyled mb-0">
      {% for tag in tags %}
  
        {% if not forloop.counter|even %}
          <li>
            <a href="{% url 'home' %}?tag={{ tag }}">{{ tag }}</a>
          </li>
        {% endif %} 

      {% endfor %}

    </ul>
  </div>

{% endblock categories %}

{% block content %}

  <!-- Title -->
  <h1 class="mt-4">{{ post.title }}</h1>

  <hr>

  <!-- Date/Time -->
  <p>{{post.created_at|date:'F d, Y'}}</p>

  <hr>

  <!-- Preview Image -->
  <img class="card-img-top rounded" style="max-height: 300px;" src="{{ post.image.url }}" alt="{{ post.title }}">

  <hr>

  <!-- Post Content -->

  {{ post.content|safe }}

  <br>
  <hr>

  <!-- Post Comments -->

  <div class="card-body">
    {% if new_comment %}
    <div class="alert alert-success" role="alert">
      Seu comentário está aguardando moderação.
    </div>
    {% else %}
    <button class="btn btn-primary btn-lg" type="button" data-toggle="collapse" data-target="#commentForm" aria-expanded="false" aria-controls="commentForm">
      Deixe seu comentário
    </button>
    <br>
    <br>
    <div class="collapse" id="commentForm">
      <form  method="POST">
        {% csrf_token %}
        {{ comment_form.media }}
        {% crispy comment_form %}
      </form>
    </div>

    {% endif %}
  </div>

  {% for comment in comments %}
  <div class="container-fluid" style="padding: 10px;">
    <p class="font-weight-bold">
      <span class="text-primary">{{ comment.name }}</span> • <span class="text-muted font-weight-normal">{{ comment.created_at|date:'F d, Y' }}</span>
    </p>
    {{ comment.body|safe }}
  </div>
  {% endfor %}
  
{% endblock content %}